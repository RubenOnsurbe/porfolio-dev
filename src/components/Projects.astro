---
import GitHub from "../icons/Github.astro";
import CSS from "../icons/Css.astro";
import TypeScript from "../icons/TypeScript.astro";
import HTML from "../icons/Html.astro";
import PHP from "../icons/Php.astro";
import Laravel from "../icons/Laravel.astro";
import Angular from "../icons/Angular.astro";
import JavaScript from "../icons/JavaScript.astro";
import MySQL from "../icons/Mysql.astro";
import Link from "../icons/Link.astro";
import LinkButton from "./LinkButton.astro";
import AstroIcon from "../icons/AstroIcon.astro";
import TailwindCSS from "../icons/TailwindCSS.astro";
import React from "../icons/React.astro";
import Supabase from "../icons/Supabase.astro";
import Turso from "../icons/Turso.astro";
import Document from "../icons/Document.astro";
import NextJS from "../icons/NextJS.astro";
import NodeJS from "../icons/NodeJS.astro";

const TAGS = {
    TYPESCRIPT: {
        name: "TypeScript",
        class: "bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30 text-white",
        icon: TypeScript,
    },
    REACT: {
        name: "React",
        class: "bg-gradient-to-r from-blue-500/20 to-blue-400/10 border border-blue-500/30 text-white",
        icon: React,
    },
    JS: {
        name: "JavaScript",
        class: "bg-gradient-to-r from-yellow-500/20 to-yellow-400/10 border border-yellow-500/30 text-white",
        icon: JavaScript,
    },
    HTML: {
        name: "HTML",
        class: "bg-gradient-to-r from-red-500/20 to-red-400/10 border border-red-500/30 text-white",
        icon: HTML,
    },
    CSS: {
        name: "CSS",
        class: "bg-gradient-to-r from-blue-400/20 to-blue-300/10 border border-blue-400/30 text-white",
        icon: CSS,
    },
    LARAVEL: {
        name: "Laravel",
        class: "bg-gradient-to-r from-red-500/20 to-red-400/10 border border-red-500/30 text-white",
        icon: Laravel,
    },
    ANGULAR: {
        name: "Angular",
        class: "bg-gradient-to-r from-red-600/20 to-red-500/10 border border-red-600/30 text-white",
        icon: Angular,
    },
    PHP: {
        name: "PHP",
        class: "bg-gradient-to-r from-purple-500/20 to-purple-400/10 border border-purple-500/30 text-white",
        icon: PHP,
    },
    MYSQL: {
        name: "MySQL",
        class: "bg-gradient-to-r from-orange-500/20 to-orange-400/10 border border-orange-500/30 text-white",
        icon: MySQL,
    },
    ASTRO: {
        name: "Astro",
        class: "bg-gradient-to-r from-orange-500/20 to-orange-400/10 border border-orange-500/30 text-white",
        icon: AstroIcon,
    },
    TAILWINDCSS: {
        name: "TailwindCSS",
        class: "bg-gradient-to-r from-cyan-500/20 to-cyan-400/10 border border-cyan-500/30 text-white",
        icon: TailwindCSS,
    },
    SUPABASE: {
        name: "Supabase",
        class: "bg-gradient-to-r from-green-500/20 to-green-400/10 border border-green-500/30 text-white",
        icon: Supabase,
    },
    TURSO: {
        name: "Turso",
        class: "bg-gradient-to-r from-blue-600/20 to-blue-500/10 border border-blue-600/30 text-white",
        icon: Turso,
    },
    NODEJS: {
        name: "NodeJS",
        class: "bg-gradient-to-r from-green-500/20 to-green-400/10 border border-green-500/30 text-white",
        icon: NodeJS,
    },
    NEXTJS: {
        name: "NextJS",
        class: "bg-gradient-to-r from-gray-400/20 to-gray-300/10 border border-gray-400/30 text-white",
        icon: NextJS,
    },
};
const PROJECTS = [
    {
        title: "TFG | Gestion de Clubes Deportivos",
        description:
            "Apliacación web para la gestión de clubes deportivos. Permite la gestión de juagadores, entrenadores, actividades, etc.",
        image: "/projects/tfg.webp",
        link: "https://sport-team-creator-front.vercel.app/",
        front: "https://github.com/RubenOnsurbe/SportTeamCreator_Front",
        back: "https://github.com/RubenOnsurbe/SportsTeamCreator-Back",
        documentation: "/documents/TFG.pdf",
        tags: [
            TAGS.LARAVEL,
            TAGS.ANGULAR,
            TAGS.TYPESCRIPT,
            TAGS.HTML,
            TAGS.CSS,
            TAGS.MYSQL,
            TAGS.PHP,
        ],
    },
    {
        title: "Promptly",
        description: "Aplicación web para compartir Prompts estilo Twitter.",
        image: "/projects/promptly.webp",
        link: "https://promptly-rdev.vercel.app/",
        tags: [TAGS.NEXTJS, TAGS.TAILWINDCSS, TAGS.SUPABASE],
    },
    {
        title: "Clon Paint",
        description:
            "Clon de la aplicación Paint. Desarrollado con JavaScript Nativo.",
        image: "/projects/paint.webp",
        link: "https://paint-js-rdev.vercel.app/",
        github: "https://github.com/RubenOnsurbe/paintJs",
        tags: [TAGS.HTML, TAGS.JS],
    },
    {
        title: "Tier Maker",
        description:
            "Aplicación para crear tus propias tier list. Desarrollado con JavaScript Nativo.",
        image: "/projects/tierMaker.webp",
        github: "https://github.com/RubenOnsurbe/TierMaker/",
        link: "https://tier-maker-rdev.vercel.app/",
        tags: [TAGS.HTML, TAGS.JS],
    },
    {
        title: "Tetris",
        description: "Tetris creado con JavaScript.",
        image: "/projects/tetris-rdev.webp",
        github: "https://github.com/RubenOnsurbe/TetrisRDEV",
        link: "https://tetris-rdev.vercel.app/",
        tags: [TAGS.HTML, TAGS.JS],
    },
    {
        title: "En progreso | Clon Spotify",
        description:
            "Clon de la web de Spotify con React y TailwindCSS. En progreso...",
        image: "/projects/spotify.webp",
        link: "https://spotify-clon-rdev.vercel.app/",
        github: "https://github.com/RubenOnsurbe/spotify-clon",
        tags: [TAGS.ASTRO, TAGS.TAILWINDCSS, TAGS.REACT],
    },
    {
        title: "En progreso | InToJobs",
        description: "Web para la gestion de trabajos. En progreso...",
        image: "/projects/intojobs.webp",
        link: "https://intojobs.vercel.app/",
        tags: [TAGS.ASTRO, TAGS.CSS, TAGS.JS, TAGS.SUPABASE],
    },
    {
        title: "En progreso | travelAgenda",
        description: "Web para la gestión de viajes. En progreso...",
        image: "/projects/travelAgenda.webp",
        link: "https://travelagenda.vercel.app/",
        tags: [TAGS.ASTRO, TAGS.CSS, TAGS.JS, TAGS.SUPABASE],
    },
    {
        title: "Traductor",
        description: "Traductor de texto. Desarrollado con React y TypeScript.",
        image: "/projects/traductor.webp",
        link: "https://traductor-ruben.vercel.app/",
        github: "https://github.com/RubenOnsurbe/translator-ruben",
        tags: [TAGS.REACT, TAGS.TYPESCRIPT],
    },
    {
        title: "En progreso | Chat Ruben",
        description: "Web de mensajería. En progreso...",
        image: "/projects/mensajeria.webp",
        link: "https://chat-ruben.vercel.app/",
        github: "https://github.com/RubenOnsurbe/chat-ruben",
        tags: [TAGS.HTML, TAGS.CSS, TAGS.JS, TAGS.TURSO, TAGS.NODEJS],
    },
];
---

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {
        PROJECTS.map(
            ({
                image,
                title,
                description,
                tags,
                link,
                github,
                front,
                back,
                documentation,
            }) => (
                <article class="flex flex-col space-y-4 p-4 rounded-2xl border border-white/10 bg-gradient-to-br from-white/5 to-white/5 hover:border-primary/30 transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 animate-fade-in group">
                    <div class="relative flex flex-col items-center gap-4 transition duration-500 ease-in-out transform shadow-xl overflow-clip rounded-xl border border-white/10 hover:border-primary/30 bg-gradient-to-br from-white/10 to-white/5">
                        <!-- Skeleton loader -->
                        <div class="skeleton absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5 animate-pulse"></div>
                        
                        <img
                            alt={`Foto del proyecto: ${title}`}
                            class="object-cover object-top w-full h-40 transition duration-500 md:group-hover:scale-105 fade-in-image"
                            loading="lazy"
                            decoding="async"
                            width="400"
                            height="240"
                            src={image}
                            onload="this.previousElementSibling.classList.add('hidden')"
                        />
                    </div>

                    <div class="flex flex-col">
                        <h3 class="text-lg font-bold bg-gradient-to-r from-white to-white/80 bg-clip-text text-transparent">
                            {title}
                        </h3>
                        <p class="text-xs text-white/70 leading-relaxed mt-2">
                            {description}
                        </p>
                        <div class="flex flex-wrap gap-1 mt-3">
                            <ul class="flex flex-wrap gap-1">
                                {tags.map((tag) => (
                                    <li>
                                        <span
                                            class={`flex items-center gap-1 rounded-full text-xs ${tag.class} py-1 px-2 hover:scale-110 transition duration-300 ease-in-out backdrop-blur-sm`}
                                        >
                                            <tag.icon class="size-3" />
                                            {tag.name}
                                        </span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                        <footer class="flex flex-wrap gap-2 justify-start mt-3">
                            {front && (
                                <LinkButton href={front}>
                                    <GitHub class="size-4" />
                                    Front
                                </LinkButton>
                            )}
                            {back && (
                                <LinkButton href={back}>
                                    <GitHub class="size-4" />
                                    Back
                                </LinkButton>
                            )}
                            {github && (
                                <LinkButton href={github}>
                                    <GitHub class="size-4" />
                                    Code
                                </LinkButton>
                            )}
                            {link && (
                                <LinkButton href={link}>
                                    <Link class="size-4" />
                                    Preview
                                </LinkButton>
                            )}
                            {documentation && (
                                <LinkButton href={documentation}>
                                    <Document class="size-4" />
                                    Docs
                                </LinkButton>
                            )}
                        </footer>
                    </div>
                </article>
            ),
        )
    }
</div>

<style>
    .skeleton {
        animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
        0% {
            background-position: -1000px 0;
        }
        100% {
            background-position: 1000px 0;
        }
    }

    .fade-in-image {
        animation: fadeIn 0.6s ease-in-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
</style>
